---
layout: post
title: BTC와 BCH를 보며 느낀 탈 중앙화에 대한 단상
categories: Tech
---

이번 글은 투자 목적도, 이윤 추구도 아닌 그냥 순수하게 제3자 입장에서 살펴본 **비트코인/비트코인캐시 vs 블록체인** 내용이다.

![지옥으로 가는 불기둥]({{ site.baseurl }}/images/tech/bitcoin/1.png)

최근(17.11.12)에 있었던 BCH 폭등 후 정말 어느 한 순간에 있었던 폭락 그래프 ~~지옥으로 가는 불꽃열차~~ 이다. 사실 저 순간을 지켜보고 있었던 사람으로써 "진술"하자면, 285만원을 찍는 순간 뭔가 이상한 기운이 감지됐고, 그 짧은 순간(약 몇 초?)에 285만원이 180만원대가 되어 있었다. ~~ㅎㄷㄷㄷㄷ~~

알고보니 빗썸 사이트가 순간적으로 터졌던 것이고, 이에 따라 대규모 폭락사태가 이루어졌던 것.. [관련기사](http://thel.mt.co.kr/newsView.html?no=2017111417238238403&ref=https%3A%2F%2Fsearch.naver.com)
(사실 빗썸 폭파? 사건은 지난 8월에 있었던 BCH 대규모 펌핑 때와 너무도 동일한 모습을 지니고 있다.. [관련기사](http://www.kinews.net/news/articleView.html?idxno=110261))

사실 밖에서 투기 목적으로만 바라보면, 이 사태는 단순하다. 제동장치 없는 가상화폐 투기시장에서 큰손들과 개미들의 싸움, 그리고 늘 그랬던 것처럼 개미들의 처절한 패배..

근데 이면에는 좀 독특한 성질이 있다.

### 블록체인

![블록체인]({{ site.baseurl }}/images/tech/bitcoin/2.png)

블록체인의 개념에 대해서야 워낙 요즘 핫한 시스템이기 때문에 대부분 알 것으로 생각하고.. 간단히 요약하자면 서버-클라이언트 구조가 아닌 P2P 환경에서의 공통 장부를 이야기 한다.

깊이 들어가면 어려우니.. 그냥 모든 네트워크의 노드들이 동일한 영향력을 가지고 참여하는 분산 네트워크라고 보면 된다.

예를 들어 하나카드에 기록되고 처리되는 나의 신용카드 처리는 하나카드와 그에 딸려있는 VAN 사 등의 시스템에서만 처리/보관되지만 블록체인은 모든 사람들이 나의 이력과 처리에 대해서 관여하고 승인해줄 수 있다고 보면 된다.(물론 실제 기술적으로는 조금 다르지만..)

* [블록체인 - 위키피디아](https://en.wikipedia.org/wiki/Blockchain)
* [사토시 나카모토 논문 -Bitcoin: A Peer-to-Peer Electronic Cash System ](https://bitcoin.org/bitcoin.pdf)

### 블록체인의 의미

기술에 대한 상세한 이해도 중요하지만 의미를 깨치는 게 더 중요한 법. 블록체인의 가장 큰 의미는 탈 중앙화라고 모두가 평가한다. 서버-클라이언트 구조는 사실 서버를 trusted boundary 라는 assumption을 대부분 전제로 삼고 있다.

설마 내 요금제를 맘대로 바꿨을까, 설마 내 이메일을 맘대로 삭제했을가, 설마 내 카드 청구대금을 맘대로 바꿨을까..

즉. 통신요금제/인터넷포털/카드/은행 등의 "서버들"은 믿을 수 밖에 없는 존재들이고 굉장히 폐쇄적인 모양새를 갖출 수 밖에 없는데, 블록체인은 이를 근본적으로 깨는 시스템이다. 그리고 이것은 **블록체인의 영향력을 극히 감소시키는 근본적인 원인** 이기도 하다. 양날의 검..

예를 들어, 삼성카드의 모든 transaction을 하나카드와 공유할 수 있을까? 절대 불가능하다. SK텔레콤이 그들의 통신망을 임대해서 사용하는 알뜰폰 사용자들에게 모든 데이터를 공유할 수 있을까? 절대 불가능하다.

즉, 기득권 및 카르텔을 갖춘 조직에서는 블록체인을 사용하는 것이 굉장히 불가능한 일이다. 정보의 불균형을 통해 권력을 유지하고 있는데 이를 "탈중앙화" / "분산화" 한다는 것은 불가능하며, 블록체인은 이 부분에 있어 역설적으로 각광을 받는 존재이유를 가지고 있다고 본다.

### 비트코인의 성장과 비트코인캐시의 탄생

비트코인이 지속적으로 가파르게 성장하면서 가장 큰 문제가 되었던 것은 블록사이즈이다. 블록 안에는 트랜잭션 (그냥 데이터라고 하자)들이 있는데 거래량이 폭증하면서 이를 처리하지 못하는 문제였다.

즉, 1MB의 블록 안에 보통 250byte 정도의 데이터가 담기니 대략 한번에 4000개 정도를 처리할 수 가 있는데 점점 데이터 량이 폭증하니 데이터가 처리되지 않고 큐에 쌓여있는 것이라고 보면 되겠다.

그래서 총 2가지의 개선방안이 있었는데 하나는 블록사이즈를 임시적으로 늘릴 수 있는 segwit(seperated witness)와 블록사이즈를 2배로 늘리는 segwit2x 방안이 논의되었다. 결론적으로 **segwit은 default, 2X는 논의대상** 이었다고 보면 되겠다.

segwit은 쉽게 말해, 모든 데이터에 서명을 붙이는 기존 방식에 비해 서명값을 분리해서 따로 보관하는 방식을 이야기한다. (블록 안에 서명값이 포함되지 않으니 그 여유분으로 트랜잭션을 더 채우겠다는 거..)

![segwit]({{ site.baseurl }}/images/tech/bitcoin/3.png)

 길고 긴 논의 끝에 segwit 찬성파와 반대파의 갈등으로 인해 비트코인을 17년 8월 1일자로 쪼개기로 한다 - bitcoin hardfork. 이것이 비트코인 캐시의 시작이다.

![bitcoin_chains]({{ site.baseurl }}/images/tech/bitcoin/4.png)

### 비트코인캐시의 의미

이게 겉으로 보면 기술적인 논쟁 같지만.. 사실은 지극히 돈의 논리가 가득한 분쟁의 결론이다.

#### ASIC BOOST와 우지한

위 그림에서와 같이 segwit은 블록체인, 조금 더 구체적으로는 머클트리를 구성하는 방식 자체가 바뀐다. 기술적으로는 충분히 커버할 수 있는 문제이나, 반대 논리의 핵심에는 ASIC이라는 게 있다.

Application Specific Integrated Circuit, 즉 ASIC은 주문형 반도체로써 특정 연산을 굉장히 빠르게 할 수 있도록 해주는 반도체이다.

문제의 핵심은 여기서 잘 살펴볼 수 있다 - [ELI5: Gregory Maxwell’s Inhibition Proposal](https://medium.com/@jimmysong/eli5-gregory-maxwells-inhibition-proposal-884f11652b89)

상기 제안의 핵심은, ASIC을 사용하지 말도록 하자는 제안이다. 이게 왜 중요하냐면..

Bitcoin의 블록헤더 구성은 아래와 같다.

+ Bitcoin block header(80 byte) = 64byte data + 16byte data
+ 64byte data = 이전 블록해시(32byte)+ 트랜잭션 지문 version(4byte) +  merkle root (32byte중 28byte)
+ 16byte data =  Merkle Root(4byte) + 타임스탬프 (4byte) + bits (4byte) + Nonce (4byte)

여기서 취약점이 발생하는데, 원칙대로 블록을 계산해서(해싱해서) 값을 도출하는 게 아니라.. timestamp와 nonce는 그냥 임의로 정해두고 -> bits 값은 retargeting 하는 시점에 정해지면 남은 것은 머클루트 4 byte인데. 이것을 미리 쭈루룩 계산해둔 뒤 값을 끼워맞추는 형식으로 올바른 해시값을 계산해낸다는 것이다.

이렇게 하면, 동일한 HW에서 계산하는 것보다 30% 이상 더 빠르게 블록값을 **채굴** 할 수 있다고 한다. 그리고, **segwit은 이러한 ASIC BOOST** 를 쓸 수 없다는 것이 가장 중요 포인트였다.

즉, 채굴자 진영에게 segwit은 굉장히 짜증나는 존재였으며, 이유는 블록채굴 성공시 25 BTC가 주어지는데.. 최근 1 BTC가 8백만원 정도임을 생각해보면... 어마어마한 금전적 손실을 가져오기 때문이다.

이 문제에 대해서 채굴자 진영의 대표, 중국의 우지한은 아래와 같이 응대했다. ~~찔리냐.. 말하는 꼬라지 하고는..~~

![jihan]({{ site.baseurl }}/images/tech/bitcoin/jihan.png)

### 비트코인캐시의 성장과 전략

블록사이즈, 수수료 등

### 비트코인캐시 하드포크 - 그 내막

to be continue...

### 비트코인캐시 하드포크 후 상황(XML, DASH 폭등)
